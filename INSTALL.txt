Installation procedures
-----------------------

Documentation:
   - Application and librairie documentation can be found on the CMC wiki at https://wiki.cmc.ec.gc.ca/wiki/SPI/Doc
   - Example scripts and macro are available in the share/examples directory of your SPI installation path

System requirements:

   - Hardware:

        Any Intel/AMD processor
        2G ram
        32Mb Graphic card (NVIDIA por favor)
        3G Disk space (For installation)

   - Software:

        Provided with the package:
           tcl8.6.6            (Tcl)
           tk8.6.6             (Tk)
           Tcllib-1.18         (Tcl librarie of tools)
           Tktable2.10         (Tk table extension)
           tcltls-1.7.12       (Tcl OpenSSL bindings)
           tdom-master         (Tcl DOM esxtension)
           tkdnd2.8            (Tk drag'n drop extension)
           tkimg1.4.6          (Tk image extension)
           mesa-7.9.2          (Mesa software OpenGL implementation)
           gdb                 (ECCC vectorial basemap)
    
        Not provided with the package:
     
           Mandatory:
              gdal-2.2            (Geospatial Data Abstraction Layer https://gdal.org)
              rmnlib-16.2         (RPN file format support           https://github.com/armnlib/librmn)
              ImageMagik          (For image output                  https://www.imagemagick.org/script/index.php)
      
           Optional:
              vgrid               (Vertical grid management          https://gitlab.com/ECCC_CMDN/vgrid)
              libeccodes          (GRIB support                      https://launchpad.net/ubuntu/+source/eccodes)
              libecbufr           (BUFR and BURP support             https://launchpad.net/libecbufr)
              liburp              (URP radar support)
              libflt              (OpenFlight support                https://sourceforge.net/projects/fltlib)
              Xvfb or Xorg xdummy (For batch mode                    https://launchpad.net/ubuntu/+source/xserver-xorg-driver-dummy)

       Make sure your graphic drivers are up to date for direct rendering (use glxinfo to confirm)

Installation:

   - DBGeo.tgz
       Geographical database (GDB), contains the base geographical data used by default by SPI.
       Decompressing it into it's final installation directory if it has'nt been installed before.
       This will take up to 13 Gig for the global coverage     
       
   - SPI_x.x.x.tgz
       SPI and it's dependencies. it contains 
       
          INSTALL.txt       : This file
          makeit            : Build and install script
          SPI_x.x.x         : The SPI application, the tcl part of SPI
          libSPI_x.x.x      : The SPI libraries to be compiled
          libeerUtils_x.x.x : Library of common functions and tools used by SPI
          ext               : External dependencies for SPI_LIB
          
       - Untar the tgz and change to the src directory.
       - Use the makeit script to build and install the package
       
            ./makeit -build
            ./makeit -install [install path]
       
      - After the installation you will be provided with some environment variables to define, which are describe bellow.
      
Environment:

   - You will have to define the GDB_PATH variable to the location of the geographical database for SPI to use it:
     Depending on the shell you are using, this might mean:

        sh/ksh/bash
           export GDB_PATH=[your geo_path]/data

        csh
           setenv GDB_PATH [your geo_path]/data

   - You will also have to define the SPI_LIB variable to the location of the SPI librairies

      sh/ksh/bash
         export SPI_LIB=[your spilib_path]

      csh
         setenv SPI_LIB [your spilib_path]
   
   - If you want to run scripts, you will have to define an environment variable pointing to the path
      where you installed SPI. Depending on the shell you are using, this might mean:

      sh/ksh/bash
         export SPI_PATH=[your spi_path]

      csh
         setenv SPI_PATH [your spi_path]

Executin SPI.

   - You can now launch SPI by calling 

         [your spi_path]/bin/SPI

      or

         $SPI_PATH/bin/SPI

      The first time you run it SPI will create a setup directory called .spi in
      your home directory where the parameters are saved. You can edit theses files, primarily
      the one called ~/.spi/SPI, carefully to configure SPI to your likings.
