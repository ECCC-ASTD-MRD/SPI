Installation procedures
-----------------------

*** Starting from version 7.9.0, the compiled parts of SPI are distributed as a separate file ***
                           See "Packages description" section

Documentation:
- Application and librairie documentation can be found on the CMC wiki at https://wiki.cmc.ec.gc.ca/wiki/SPI/Doc
- Example scripts and macro are available in the Demo directory of your SPI installation path

Compatibility:
- This package has been compiled on:

   - gcc 4.4.3 (64bit) and tested on KUbuntu 10.0.4
   - gcc 4.6.3 (64bit) and tested on KUbuntu 12.0.4

Assumptions:
- Installation and execution of the SPI software will be performed as a specific user and installed in the SPI directory of this user.
- All commands will be relative to the user's home directory (ie all install and working paths will start with ~/).
- The installation shell is ksh compatible (can usually be obtained with the command $echo $SHELL)
- Note to shell newbies, all commands used in this installation document can be explained by their online manual. To access their manual, simply type:
   man <command>

System requirements:

  Hardware:

     Any Intel/AMD processor
     2G ram
     32Mb Graphic card (NVIDIA por favor)
     3G Disk space (For installation)

   Software:

     Xvfb       (For batch mode)
     ImageMagik (For image output)

     Graphic drivers for direct rendering (use glxinfo to confirm)

Installation:

   A) Packages description

      - Geographical database (GDB), contains the base geographical data used by default by SPI
            DBGeo.tgz

      - The SPI libraries, the compiled librairies needed by SPI. Choose the one for your system
         libSPI_x.x.x_platform.tgz
         
      - The SPI application, the tcl part of SPI
         SPI_x.x.x.tgz

   B) Decompressing the packages

      - You will need to install the geographical database (DBGEO_?.zip) first by decompressing it
        into it's final installation directory if it has'nt been installed before.

        This will take up to 13 Gig for the global coverage

           tar -zxvf DBGeo.tgz -C [your geo_path]

      - Next is the SPI librairies which again is to be decompressed into it's final installation directory           
           tar -zxvf libSPI_x.x.x_platform.tgz -C [your libspi_path]
           
      - Then you can uncompress the SPI package to it's final installation directory.

           tar -zxvf SPI_x.x.x.tgz -C [your spi_path]

   D) Profile setup.

      - You will have to define the GDB_PATH variable to the location of the geographical database for SPI to use it:
        Depending on the shell you are using, this might mean:

        sh/ksh/bash
           add this line to the .profile or .profile_usr

           export GDB_PATH=[your geo_path]/data

        csh

           add this line to the .cshrc

           setenv GDB_PATH [your geo_path]/data

      - You will also have to define the SPI_LIB variable to the location of the SPI librairies

        sh/ksh/bash
           add this line to the .profile or .profile_usr

           export SPI_LIB=[your spilib_path]

        csh

           add this line to the .cshrc

           setenv SPI_LIB [your spilib_path]
      
      - If you want to run scripts, you will have to define an environment variable pointing to the path
        where you installed SPI. Depending on the shell you are using, this might mean:

        sh/ksh/bash

           add this line to the .profile or .profile_usr

           export SPI_PATH=[your spi_path]

        csh

           add this line to the .cshrc

           setenv SPI_PATH [your spi_path]

   E) Run SPI.

      - You can now launch SPI by calling

           [your spi_path]/bin/SPI

        or

           $SPI_PATH/bin/SPI

        The first time you run it SPI will create a setup directory called .spi in
        your home directory where the parameters are saved. You can edit theses files, primarily
        the one called ~/.spi/SPI, carefully to configure SPI to your likings.

Developers:
- Source code is available at http://subversion.cmc.ec.gc.ca/repos/eerSPI
- The package comes with two distinct parts, the Tcl code (eer_SPI directory) and the Tcl extensions (LibTkGL directory)
- To build the Tcl extensions, go in the LibTkGL directory and use the "makeit" script. The built libraries will be copied to the eer_SPI/Lib/$ARCH directory
- SPI needs a lot of support libraries which have already been precompiled for you convenience in the eer_SPI/Lib/$ARCH directory
- Should you want to try new versions of theses support librairies, you should place them in this eer_SPI/Lib/$ARCH directory
- A script called make_dependencies.sh contains the build parameters for the various packages

     Tcl/Tk 8.6.0
     Tktable2.10
     tls1.6
     tDOM-0.8.3
     grib_api-1.12.0
     libecbufr-0.8.2rc1 
     
     gdal-1.11.0
         libxml2-2.7.2
         expat-2.0.1
         curl-7.21.3
         sqlite-3.6.23
         geos-3.2.2
         mysql-5.1
         jasper-1.900.1
         hdf-4.2.5
         hdf5-1.8.11
         postgresql-8.4.1
         unixODBC-2.3.0
         proj-4.8.0

