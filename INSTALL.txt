Installation procedures
-----------------------

*** Starting from version 7.9.0, the compiled parts of SPI are distributed as a separate file ***
                           See "Packages description" section

Documentation:
- Application and librairie documentation can be found on the CMC wiki at https://wiki.cmc.ec.gc.ca/wiki/SPI/Doc
- Example scripts and macro are available in the Demo directory of your SPI installation path

Compatibility:
- This package has been compiled on:

   - gcc 4.8.4 (64bit) and tested on KUbuntu 14.0.4

Assumptions:
- Installation and execution of the SPI software will be performed as a specific user and installed in the SPI directory of this user.
- All commands will be relative to the user's home directory (ie all install and working paths will start with ~/).
- The installation shell is ksh compatible (can usually be obtained with the command $echo $SHELL)
- Note to shell newbies, all commands used in this installation document can be explained by their online manual. To access their manual, simply type:
   man <command>

System requirements:

  Hardware:

     Any Intel/AMD processor
     2G ram
     32Mb Graphic card (NVIDIA por favor)
     3G Disk space (For installation)

   Software:

     Provided with the package:
        tcl8.6.6            (Tcl)
        tk8.6.6             (Tk)
        Tcllib-1.18         (Tcl librarie of tools)
        Tktable2.10         (Tk table extension)
        tcltls-1.7.12       (Tcl OpenSSL bindings)
        tdom-master         (Tcl DOM esxtension)
        tkdnd2.8            (Tk drag'n drop extension)
        tkimg1.4.6          (Tk image extension)
        mesa-7.9.2          (Mesa software OpenGL implementation)
        gdb                 (ECCC vectorial basemap)
    
     Not provided with the package:
     
     Necessary:
        gdal-1.9            (Geospatial Data Abstraction Layer https://gdal.org/)
        rmnlib-16.2         (RPN file format support           https://github.com/armnlib/librmn)
        ImageMagik          (For image output                  https://www.imagemagick.org/script/index.php)
     
     Optional:
        libeccodes          (GRIB support                      https://launchpad.net/ubuntu/+source/eccodes)
        libecbufr           (BUFR and BURP support             https://launchpad.net/libecbufr)
        liburp              (URP radar support)
        libflt              (OpenFlight support                https://sourceforge.net/projects/fltlib)
        Xvfb or Xorg xdummy (For batch mode                    https://launchpad.net/ubuntu/+source/xserver-xorg-driver-dummy)

     Make sure your graphic drivers are up to date for direct rendering (use glxinfo to confirm)

Installation:

   A) Packages description

      - Geographical database (GDB), contains the base geographical data used by default by SPI
            DBGeo.tgz

      - The SPI libraries source code
         libSPI_x.x.x.tgz
         
      - The SPI application, the tcl part of SPI
         SPI_x.x.x.tgz

   B) Decompressing the packages

      - You will need to install the geographical database (DBGEO_?.zip) first by decompressing it
        into it's final installation directory if it has'nt been installed before.

        This will take up to 13 Gig for the global coverage

           tar -zxvf DBGeo.tgz -C [your geo_path]

      - Next is the SPI librairies which again is to be decompressed into it's final installation directory           
           tar -zxvf libSPI_x.x.x_platform.tgz -C [your libspi_path]
           
      - Then you can uncompress the SPI package to it's final installation directory.

           tar -zxvf SPI_x.x.x.tgz -C [your spi_path]

   D) Profile setup.

      - You will have to define the GDB_PATH variable to the location of the geographical database for SPI to use it:
        Depending on the shell you are using, this might mean:

        sh/ksh/bash
           add this line to the .profile or .profile_usr

           export GDB_PATH=[your geo_path]/data

        csh

           add this line to the .cshrc

           setenv GDB_PATH [your geo_path]/data

      - You will also have to define the SPI_LIB variable to the location of the SPI librairies

        sh/ksh/bash
           add this line to the .profile or .profile_usr

           export SPI_LIB=[your spilib_path]

        csh

           add this line to the .cshrc

           setenv SPI_LIB [your spilib_path]
      
      - If you want to run scripts, you will have to define an environment variable pointing to the path
        where you installed SPI. Depending on the shell you are using, this might mean:

        sh/ksh/bash

           add this line to the .profile or .profile_usr

           export SPI_PATH=[your spi_path]

        csh

           add this line to the .cshrc

           setenv SPI_PATH [your spi_path]

   E) Run SPI.

      - You can now launch SPI by calling

           [your spi_path]/bin/SPI

        or

           $SPI_PATH/bin/SPI

        The first time you run it SPI will create a setup directory called .spi in
        your home directory where the parameters are saved. You can edit theses files, primarily
        the one called ~/.spi/SPI, carefully to configure SPI to your likings.
